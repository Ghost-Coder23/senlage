{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block bodyclass %}{{ block.super }} login-page{% endblock %}
{% block nav-sidebar %}{% endblock %}

{% block content %}
<div class="admin-login-layout" x-data="{ showPassword: false }">
    <div class="admin-login-grid">
        <section class="admin-login-card">
            <h1 class="admin-login-title">Welcome Back</h1>
            <p class="admin-login-subtitle">Sign in to continue</p>

            {% if form.errors and not form.non_field_errors %}
            <p class="admin-login-error">
                {% if form.errors.items|length == 1 %}{% translate "Please correct the error below." %}{% else %}{% translate "Please correct the errors below." %}{% endif %}
            </p>
            {% endif %}

            {% if form.non_field_errors %}
                {% for error in form.non_field_errors %}
                <p class="admin-login-error">{{ error }}</p>
                {% endfor %}
            {% endif %}

            <form action="{{ app_path }}" method="post" id="login-form" class="admin-login-form">
                {% csrf_token %}
                <div class="admin-login-field">
                    <label for="id_username" class="admin-login-label">{% translate 'Username' %}</label>
                    {{ form.username }}
                </div>

                <div class="admin-login-field">
                    <div class="admin-login-label-row">
                        <label for="id_password" class="admin-login-label">{% translate 'Password' %}</label>
                        <button type="button" class="admin-login-toggle"
                            @click="
                                const el = document.getElementById('id_password');
                                if (!el) return;
                                showPassword = !showPassword;
                                el.type = showPassword ? 'text' : 'password';
                            "
                            x-text="showPassword ? 'Hide' : 'Show'">
                        </button>
                    </div>
                    {{ form.password }}
                    <input type="hidden" name="next" value="{{ next }}">
                </div>

                <button type="submit" class="admin-login-submit">
                    {% translate 'Sign In' %}
                </button>
            </form>

            {% url 'admin_password_reset' as password_reset_url %}
            {% if password_reset_url %}
            <p class="admin-login-reset">
                <a class="admin-login-reset-link" href="{{ password_reset_url }}">{% translate 'Forgotten your password or username?' %}</a>
            </p>
            {% endif %}
        </section>
    </div>
</div>
{% endblock %}
